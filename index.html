<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Buscador 380V</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: Arial, sans-serif;
  overflow: hidden; /* ðŸ”’ evita scroll general */
}

/* ===== PANTALLAS ===== */
.pantalla {
  position: absolute;
  inset: 0;
  display: none;
}

.pantalla.activa {
  display: flex;
}

/* ===== PANTALLA INICIAL ===== */
#inicio {
  background: black;
  align-items: center;
  justify-content: center;
}

#inicio img {
  max-width: 400px;
  width: 80%;
  height: auto;
  cursor: pointer;
}

/* ===== PANTALLA BUSCADOR ===== */
#buscador {
  background-image: url("Sala.jpg");
  background-size: cover;
  background-position: center;
  align-items: center;
  justify-content: center;
}

.overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.45);
}

.content {
  position: relative;
  z-index: 2;
  color: white;
  text-align: center;
  width: 90%;
  max-width: 900px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

h1 {
  color: #5DDE82;
}

select, input {
  font-size: 1.4rem;
  padding: 11px 15px;
  border-radius: 6px;
  border: none;
  margin-bottom: 12px;
  width: 100%;
  max-width: 420px;
}

.botones {
  display: flex;
  gap: 15px;
  margin-bottom: 10px;
}

button {
  font-size: 1.1rem;
  padding: 12px 22px;
  border: none;
  border-radius: 8px;
  background: #00e0ff;
  cursor: pointer;
}

button:hover {
  background: #00bcd4;
}

/* ===== RESULTADOS CON SCROLL ===== */
.resultados {
  margin-top: 15px;
  width: 100%;
  max-height: 45vh;          /* ðŸ‘ˆ lÃ­mite de altura */
  overflow-y: auto;          /* ðŸ‘ˆ scroll interno */
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 15px;
  padding-right: 8px;
  box-sizing: border-box;
  scroll-behavior: smooth;
}

.card {
  background: white;
  color: black;
  border-radius: 8px;
  padding: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.25);
}

.equipo {
  font-weight: bold;
  font-size: 1.2rem;
}

.desc {
  font-size: 0.95rem;
  color: #333;
}
</style>
</head>

<body>

<!-- ===== PANTALLA 0 ===== -->
<div id="inicio" class="pantalla activa">
  <img src="inicio.jpg" alt="Entrar" onclick="entrar()">
</div>

<!-- ===== PANTALLA 1 ===== -->
<div id="buscador" class="pantalla">
  <div class="overlay"></div>

  <div class="content">
    <h1>UNIDAD GUE13</h1>
    <h1>Buscar Equipos de 380V</h1>

    <select id="barra">
      <option value="Todas">Todas las Barras</option>
      <option value="3 CA">3 CA</option>
      <option value="3 CC">3 CC</option>
      <option value="3 DZ">3 DZ</option>
      <option value="3 OCA">3 OCA</option>
      <option value="3 OCN">3 OCN</option>
      <option value="3 OCP">3 OCP</option>
    </select>

    <input id="busqueda" type="text" placeholder="Ej: RL, RN, VG">

    <div class="botones">
      <button onclick="buscar()">Buscar</button>
      <button onclick="volver()">Volver</button>
    </div>

    <div id="resultados" class="resultados"></div>
  </div>
</div>

<script>
let datos = [];

/* === ENTRAR === */
function entrar() {
  const el = document.documentElement;
  if (el.requestFullscreen) el.requestFullscreen();

  document.getElementById("inicio").classList.remove("activa");
  document.getElementById("buscador").classList.add("activa");
}

/* === VOLVER === */
function volver() {
  document.getElementById("buscador").classList.remove("activa");
  document.getElementById("inicio").classList.add("activa");
  document.getElementById("resultados").innerHTML = "";
  document.getElementById("busqueda").value = "";
}

/* === CARGAR CSV === */
fetch("380.csv")
  .then(r => r.text())
  .then(t => {
    const l = t.split("\n");
    datos = l
      .slice(1)
      .filter(x => x.trim())
      .map(x => {
        const c = x.split(";");
        return {
          equipo: c[0]?.trim(),
          descripcion: c[1]?.trim(),
          barra: c[2]?.trim()
        };
      });
  });

/* === BUSCAR === */
function buscar() {
  const texto = busqueda.value.toLowerCase();
  const barra = document.getElementById("barra").value;
  const res = document.getElementById("resultados");
  res.innerHTML = "";

  if (!texto) return;

  datos
    .filter(d =>
      d.equipo &&
      d.equipo.toLowerCase().includes(texto) &&
      (barra === "Todas" || d.barra === barra)
    )
    .forEach(d => {
      const c = document.createElement("div");
      c.className = "card";
      c.innerHTML = `
        <div class="equipo">${d.equipo}</div>
        <div class="desc">${d.descripcion}</div>
      `;
      res.appendChild(c);
    });
}
</script>

</body>
</html>
